{"version":3,"sources":["../../src/pages/login/login.module.ts","../../src/pages/home/home.ts","../../src/pages/login/login.ts"],"names":[],"mappings":"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","file":"0.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { LoginPage } from './login';\n\n@NgModule({\n  declarations: [\n    LoginPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(LoginPage),\n  ],\n})\nexport class LoginPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.module.ts","import { Component } from '@angular/core';\nimport { NavController, ModalController, Events, IonicPage } from 'ionic-angular';\nimport {Storage} from '@ionic/storage';\n\n@IonicPage()\n@Component({\n  selector: 'page-home',\n  templateUrl: 'home.html'\n})\nexport class HomePage {\n\n  galleryType = 'obituaries';\n  loginModal: any;\n  loggedin: boolean = false\n\n  constructor(\n  \tpublic navCtrl: NavController,\n  \tpublic modalCtrl: ModalController,\n    public storage: Storage,\n    public events: Events\n  \t) {\n\n  \tconsole.log('home page')\n\n    events.subscribe('user:login', data => {\n      this.setLoginData(data);\n    });\n\n  }\n\n  ionViewDidEnter() {\n\n    this.storage.get('user_login').then( data => {\n      if( data ) {\n        // do checks here\n        this.loggedin = true\n      } else {\n        this.loggedin = false\n      }\n    })\n\n\n  }\n\n  pushPage(page) {\n\n    this.navCtrl.push( page );\n\n  }\n\n  openLoginModal() {\n\n    this.loginModal = this.modalCtrl.create( 'LoginModalPage' );\n\n    this.loginModal.present();\n\n  }\n\n  setLoginData( data ) {\n\n    if( data.logout ) {\n      this.loggedin = false\n    } else if( data.success ) {\n      this.loggedin = true\n    }\n\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/home.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, LoadingController, ToastController } from 'ionic-angular';\nimport { Http } from '@angular/http';\nimport { AuthServiceProvider } from '../../providers/auth-service/auth-service';\nimport { HomePage } from '../../pages/home/home';\nimport { RegisterPage } from '../../pages/register/register';\n\n/**\n * Generated class for the LoginPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-login',\n  templateUrl: 'login.html',\n})\nexport class LoginPage {\n\n  loading: any;\n  loginData = { email:'', password:'' };\n  data: any;\n\n  constructor(public navCtrl: NavController, public navParams: NavParams,\n    public http: Http,\n    public authService: AuthServiceProvider,\n    public loadingCtrl: LoadingController, \n    private toastCtrl: ToastController\n    ) {\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad LoginPage');\n  }\n\n  doLogin() {\n    this.showLoader();\n    this.authService.login(this.loginData).then((result) => {\n      this.loading.dismiss();\n      this.data = result;\n      if (this.data.status=='ok'){\n        localStorage.setItem('token', this.data.token);\n        this.navCtrl.push(HomePage);\n      } else {\n        this.presentToast(this.data.message);  \n      }\n    }, (err) => {\n      this.loading.dismiss();\n      this.presentToast(err);\n    });\n  }\n\n  register() {\n    this.navCtrl.push(RegisterPage);\n  }\n\n  showLoader(){\n    this.loading = this.loadingCtrl.create({\n        content: 'Authenticating...'\n    });\n\n    this.loading.present();\n  }\n\n  presentToast(msg) {\n    let toast = this.toastCtrl.create({\n      message: msg,\n      duration: 3000,\n      position: 'bottom',\n      dismissOnPageChange: true\n    });\n\n    toast.onDidDismiss(() => {\n      console.log('Dismissed toast');\n    });\n\n    toast.present();\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.ts"],"sourceRoot":""}